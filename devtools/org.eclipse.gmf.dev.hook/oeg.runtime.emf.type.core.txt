Index: src/org/eclipse/gmf/runtime/emf/type/core/edithelper/AbstractEditHelper.java
===================================================================
RCS file: /cvsroot/technology/org.eclipse.gmf/plugins/org.eclipse.gmf.runtime.emf.type.core/src/org/eclipse/gmf/runtime/emf/type/core/edithelper/AbstractEditHelper.java,v
retrieving revision 1.2
diff -u -r1.2 AbstractEditHelper.java
--- src/org/eclipse/gmf/runtime/emf/type/core/edithelper/AbstractEditHelper.java	12 Sep 2005 21:26:55 -0000	1.2
+++ src/org/eclipse/gmf/runtime/emf/type/core/edithelper/AbstractEditHelper.java	15 Nov 2005 09:15:21 -0000
@@ -91,6 +91,11 @@
 
 		CompositeCommand command = createCompositeCommand(req);
 		
+		Map sources = (Map) req.getParameter("org.eclipse.gmf.dev.sources");
+		if (sources != null) {
+			sources.put(command, this);
+		}
+		
 		// Get 'before' commands from matching element type
 		// specializations
 		IEditHelperAdvice[] advice = getEditHelperAdvice(req);
@@ -104,6 +109,9 @@
 
 				if (beforeAdvice != null) {
 					command.compose(beforeAdvice);
+					if (sources != null) {
+						sources.put(beforeAdvice, nextAdvice);
+					}
 				}
 			}
 		}
@@ -117,6 +125,9 @@
 			
 		} else if (insteadCommand != null) {
 			command.compose(insteadCommand);	
+			if (sources != null) {
+				sources.put(insteadCommand, this);
+			}
 		}
 
 		// Get 'after' commands from matching element type
@@ -130,6 +141,9 @@
 
 				if (afterAdvice != null) {
 					command.compose(afterAdvice);
+					if (sources != null) {
+						sources.put(afterAdvice, nextAdvice);
+					}
 				}
 			}
 		}
