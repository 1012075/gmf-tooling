<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="http://dev.eclipse.org/default_style.css"
	type="text/css">
<title>GMF Build Instructions</title>
</head>

<body>
<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td ALIGN="LEFT" width="80%">
		<p><b><font face="Verdana" size="+3">GMF Build Instructions</font></b><br />
		&nbsp;Last Updated: September 14, 2005</p>

		</td>
	</tr>
</table>
<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td align="LEFT" valign="TOP" colspan="3" bgcolor="#0080C0"><b><font
			face="Arial,Helvetica" color="#FFFFFF"><a name="policy"></a>Table of
		Contents</font></b></td>
	</tr>
	<TR>
		<TD align="LEFT" valign="TOP" colspan="3"><a href="#intro">Introduction</a><br />
		<a href="#prereqs">Prerequisites</a><br />
		<a href="#setup">Setup</a><br />
		<a href="#build">Run the build</a><br />
		<a href="#cruise">Using CruiseControl</a><br />
		<a href="#antbuildproperties">Ant build.properties</a><br />
		<a href="#structure">Project structure</a><br />
		<a href="#developers">Developer information</a><br />
		<a href="#gotchas">Gotchas</a><br />
		</TD>
	</TR>
</table>

<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td align="LEFT" valign="TOP" colspan="3" bgcolor="#999999"><b><font
			face="Arial,Helvetica" color="#FFFFFF"> <a name="intro"></a>Introduction</font></b></td>
	</tr>

	<TR>
		<TD align="LEFT" valign="TOP" colspan="3">

		<p>This document describes how to build GMF components from the
		command line using Ant scripts, including the running of unit tests
		and operation under <a href="http://cruisecontrol.sf.net">CruiseControl</a>.
		<br />
		<br />
		Note that while there is no mandated standard for builds among Eclipse
		projects, they generally follow a similar process to what is described
		here; that is, they leverage the <a
			href="http://dev.eclipse.org/viewcvs/index.cgi/*checkout*/org.eclipse.releng.eclipsebuilder/readme.html?rev=HEAD&content-type=text/html">org.eclipse.releng.basebuilder</a>
		framework. This framework enables headless operation of the Eclipse <a
			href="http://dev.eclipse.org/viewcvs/index.cgi/*checkout*/org.eclipse.releng.basebuilder/readme.html?rev=HEAD&content-type=text/html">PDE
		build</a> functionality. The GMF build process was developed using
		examples found in the Platform, GEF, EMF, VE, and WTP projects.<br />
		<br />
		A release engineering <a
			href="http://download.eclipse.org/eclipse/downloads/drops/R-3.1-200506271435/download.php?dropFile=org.eclipse.releng.tools_3.1.0.zip">tool</a>
		is available for use with this framework. Information on its use can
		be found <a href="#developers">here</a>.</p>
		</TD>
	</TR>
</table>

<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td align="LEFT" valign="TOP" colspan="3" bgcolor="#999999"><b><font
			face="Arial,Helvetica" color="#FFFFFF"> <a name="prereqs"></a>Prerequisites</font></b></td>
	</tr>

	<TR>
		<TD align="LEFT" valign="TOP" colspan="3">A number of prerequisites
		need to be installed on the build machine, as follows:<br />

		<p>1. <a href="http://www.nongnu.org/cvs/">CVS</a> version 1.10 or
		higher.<br />
		2. <a href="http://java.sun.com/j2se/1.5.0/download.jsp">J2SE 5.0</a>.<br />
		3. <a href="http://www.info-zip.org/pub/infozip/">Info-Zip zip and
		unzip</a><br />
		5. <a href="http://ant.apache.org/">Ant</a><br />
		5. <a href="http://cruisecontrol.sf.net/">CruiseControl</a> (optional)<br />
		6. <a href="http://jakarta.apache.org/tomcat/">Tomcat</a> or similar
		webserver (optional)<br />
		</p>
		<p>For more information on PDE Build, refer to the <a
			href="http://dev.eclipse.org/viewcvs/index.cgi/*checkout*/org.eclipse.releng.basebuilder/readme.html?rev=HEAD&content-type=text/html">plug-in</a>
		itself.<br />
		For examples, refer to the <a
			href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.releng.eclipsebuilder/">org.eclipse.releng.eclipsebuilder</a>
		plug-in and its <a
			href="http://dev.eclipse.org/viewcvs/index.cgi/*checkout*/org.eclipse.releng.eclipsebuilder/readme.html?rev=HEAD&content-type=text/html">readme</a>.

		</p>
		</TD>
	</TR>
</table>

<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td align="LEFT" valign="TOP" colspan="3" bgcolor="#999999"><b><font
			face="Arial,Helvetica" color="#FFFFFF"> <a name="setup"></a>Setup</font></b></td>
	</tr>

	<TR>
		<TD align="LEFT" valign="TOP" colspan="3">With the prerequisites
		installed, follow these steps to setup your environment and build the
		GMF components:<br />
		<br />
		1. Add the zip, unzip, and cvs executables to your PATH environment
		variable.<br />
		2. Add the jre/bin directory of the installed JDK to your PATH
		environment variable.<br />
		3. Add the ant/bin directory of the installed Ant to your PATH
		environment variable.<br />
		4. Create a directory for the build, e.g.
		<ul>
			<li><code>mkdir /gmfbuild</code></li>
		</ul>
		<b>Note</b> that you will want to place this directory close to the
		root of the drive on Windows, due to path length limitations.
		Optionally, you may choose to use the -DbuildRoot property to target a
		location near the root. <br />
		<br />
		5. Install the v3.1 Eclipse release engineering basebuilder (this
		installation will be used to run the build tools, it is not itself a
		GMF installation): Export <b>org.eclipse.releng.basebuilder</b> from
		the CVS repository <b>/home/eclipse</b> into the build directory, e.g.
		<ul>
			<li><code>cd /gmfbuild</code></li>
			<li><code>cvs -d :pserver:anonymous@dev.eclipse.org:/home/eclipse
			export -r vI20050627-1435 org.eclipse.releng.basebuilder</code></li>
		</ul>
		6. Export <b>org.eclipse.gmf.releng.builder</b> into the build
		directory.
		<ul>
			<li><code>cvs -d
			:pserver:anonymous@dev.eclipse.org:/cvsroot/technology export -r HEAD
			-d org.eclipse.gmf.releng.builder
			org.eclipse.gmf/releng/org.eclipse.gmf.releng.builder</code></li>
		</ul>
		7. Before running the build, you may wish to adjust some of the build
		properties (see <a href="#antbuildproperties">below</a>). In
		particular, you may want to comment-out the 'useMirror' property found
		in the main build.properties file (in the 'scripts' directory). By
		default, the GMF build machine uses a local <a
			href="http://jakarta.apache.org/tomcat/">Tomcat</a> installation for
		an update site and <a href="http://cruisecontrol.sf.net">CruiseControl</a>
		reporting. Technically, the build should function without a local
		mirror and default to the main update site for dependency
		installation, which is obviously not desired for frequent builds.</TD>
	</TR>
	<TR>
		<TD align="LEFT" valign="TOP" colspan="3">
		<p>By default, the build will create the following structure, assuming
		a 'gmfbuild' root was created as indicated above. This structure also
		shows the default expected Tomcat and CruiseControl locations, which
		are configurable:</p>
		<table width="100%" border="0">
			<tr>
				<td colspan="6"><strong>/gmfbuild</strong></td>
				<td width="62%">Root of build (named as in instructions above)</td>
			</tr>
			<tr>
				<td width="2%">&nbsp;</td>
				<td colspan="5" bordercolor="0"><strong>/build</strong></td>
				<td>Root of the build output (configurable with -DbuildRoot
				property)</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/artifacts</strong></td>
				<td>Root of component build results, with a subdirectory for each</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/checkout</strong></td>
				<td>CVS structure used by CruiseControl</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/doc</strong></td>
				<td>Build directory of the 'doc' component</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/eclipse</strong></td>
				<td>Base installation to compile against and execute tests</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/examples</strong></td>
				<td>Build directory of the 'examples' component</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/logs</strong></td>
				<td>Location of CruiseControl logs</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/runtime</strong></td>
				<td>Build directory of the 'runtime' component</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/sdk</strong></td>
				<td>Build directory of the 'sdk' component</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/tests</strong></td>
				<td>Build directory of the 'tests' component</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/updateSite</strong></td>
				<td>Target for generated update jars, replicated on local mirror if
				used</td>
			</tr>
			<tr>
				<td width="2%">&nbsp;</td>
				<td colspan="5" bordercolor="0"><strong>/org.eclipse.gmf.releng.builder</strong></td>
				<td>GMF releng builder</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/doc</strong></td>
				<td>Script to build the org.eclipse.gmf.doc feature</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/examples</strong></td>
				<td>Script to build the org.eclipse.gmf.examples feature</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/runtime</strong></td>
				<td>Script to build the org.eclipse.gmf feature</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/scripts</strong></td>
				<td>Directory containing build, tests, update, cruise, etc. scripts.
				Execute from this directory.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/sdk</strong></td>
				<td>Script to build the org.eclipse.gmf.sdk feature</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/tests</strong></td>
				<td>Script to bulid the org.eclipse.gmf.tests feature</td>
			</tr>
			<tr>
				<td width="2%">&nbsp;</td>
				<td colspan="5" bordercolor="0"><strong>/org.eclipse.releng.basebuilder</strong></td>
				<td>Eclipse releng builder</td>
			</tr>
			<tr>
				<td colspan="6"><strong>/java</strong></td>
				<td width="62%">Root of Tomcat and CruiseControl</td>
			</tr>
			<tr>
				<td width="2%">&nbsp;</td>
				<td colspan="5" bordercolor="0"><strong>/cruisecontrol-2.3.1</strong></td>
				<td>CruiseControl installation</td>
			</tr>
			<tr>
				<td width="2%">&nbsp;</td>
				<td colspan="5" bordercolor="0"><strong>/Tomcat 5.5</strong></td>
				<td>Tomcat installation</td>
			</tr>
		</table>
		</TD>
	</TR>
</table>


<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td align="LEFT" valign="TOP" colspan="3" bgcolor="#999999"><b><font
			face="Arial,Helvetica" color="#FFFFFF"> <a name="build"></a>Run the
		build</font></b></td>
	</tr>

	<TR>
		<TD align="LEFT" valign="TOP" colspan="3">

		<p><b>cd</b> to the 'scripts' directory under
		org.eclipse.gmf.releng.builder and execute the build command passing
		the desired component to target (on Windows) :</p>
		<ul>
			<li>cd org.eclipse.gmf.releng.builder\scripts</li>
			<li>build.bat -Dcomponent=sdk | runtime | examples | tests | doc</li>
		</ul>
		<p>Optionally, you can use the following command:</p>
		<ul>
			<li>java -jar ..\org.eclipse.releng.basebuilder\startup.jar
			-application org.eclipse.ant.core.antRunner -Dcomponent=sdk | runtime
			| examples | tests | doc</li>
		</ul>
		<br />

		<p><b>Note</b> that the download of the Eclipse SDK and/or test
		framework may fail using the Ant 'get' task, so you may have to
		download these elements and place in the 'build' folder manually.
		These zips are maintained for future use in the 'build' directory to
		make -DcleanBase builds quicker. Notice that unless a local mirror is
		installed, each dependent feature (EMF, GEF, etc.) will be downloaded
		from its respective update site with each -DcleanBase build.
		Therefore, it is recommended that a local mirror be used to speed up
		the process and to reduce stress on the update sites.</p>

		<p><b><a name="components"></a></b>The component property value sets
		the name of the directory in org.eclipse.gmf.releng.builder which
		contains the Ant scripts that build a given GMF component, as descibed
		below: <br />
		</p>
		<table width="100%" border="1">
			<tr>
				<td width="25%"><b>Component</b> (directory name in
				org.eclipse.gmf.releng.builder)</td>
				<td width="75%"><b>Description</b></td>
			</tr>
			<tr>
				<td width="25%">sdk</td>
				<td width="75%">This directory contains the scripts used to build
				the GMF SDK feature (org.eclipse.gmf.sdk). A GMF SDK includes the
				runtime feature and is comprised of binaries and sources.</td>
			</tr>
			<tr>
				<td width="25%">runtime</td>
				<td width="75%">This directory contains the scripts used to build
				the GMF runtime feature (org.eclipse.gmf). The GMF runtime component
				contains only those binaries required to run a GMF-based
				application.</td>
			</tr>
			<tr>
				<td width="25%">examples</td>
				<td width="75%">This directory contains the scripts used to build
				the GMF example feature (org.eclipse.gmf.examples) with sources. <b>Note</b>
				that the SDK build is a prerequisite.</td>
			</tr>
			<tr>
				<td width="25%">tests</td>
				<td width="75%">This directory contains the scripts used to build
				and execute the GMF unit tests feature (org.eclispe.gmf.tests). <b>Note</b>
				that the SDK and examples builds are prerequisites.</td>
			</tr>
			<tr>
				<td width="25%">doc</td>
				<td width="75%">This directory contains the scripts used to build
				the GMF documentation feature (org.eclipse.gmf.doc).</td>
			</tr>
		</table>
		</TD>
	</TR>
	<TR>
		<TD align="LEFT" valign="TOP" colspan="3"><br />
		A number of properties described <a href="#antbuildproperties">below</a>
		can be passed in via the build command to override the default
		settings. Of course, direct modification of the properties is an
		alternative. <b>Note</b> that if you choose to set the
		'buildDirectory' property, it will need to end in the name of the
		component. It is recommended that 'buildRoot' be used instead, as it
		will have the component name appended to form the 'buildDirectory'
		property by default. By default, 'buildRoot' will be a sibling of the
		org.eclipse.gmf.releng.builder directory.<br />
		<br />
		<b>Examples:</b><br />
		<br />

		<p><b>build -Dcomponent=sdk -javacFailOnError=false
		-DjavacVerbose=false -DbuildRoot=d:\mybuild</b><br />
		<br />
		This builds a GMF SDK in the directory d:\mybuild\sdk.
		&quot;-DjavaVerbose=false&quot; indicates that no compile logs will be
		generated and &quot;-javacFailOnError=false&quot; will cause the build
		to not fail if there are any compile errors.<br />
		<br />
		</p>
		<p><b>build -Dcomponent=runtime -DbuildRoot=d:\gmfbuilds
		-DbaseLocation=d:\eclipse\eclipse3.1</b></p>
		<p>This builds a GMF runtime in the directory
		&quot;d:\gmfbuilds\runtime&quot; yet uses an installation of eclipse
		located at 'd:\eclipse\eclipse3.1' as the base to build against.<br />
		<br />
		<p><b>build -Dcomponent=tests -DbuildRoot=d:\mybuild -DcleanBase=true
		-Dclean=true</b></p>
		<p></p>
		<p>This builds the GMF test plug-ins from scratch, as 'clean' is used.
		The build will also delete the base installation and unzip a fresh
		copy of Eclipse and install GMF's dependencies. <b>Note</b> that an
		'sdk' build is a necessary dependency of the 'tests' build.<br />
		</p>

		</TD>
	</TR>

</table>


<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td align="LEFT" valign="TOP" colspan="3" bgcolor="#999999"><b><font
			face="Arial,Helvetica" color="#FFFFFF"> <a name="mirror"></a>Using a
		local mirror</font></b></td>
	</tr>

	<TR>
		<TD align="LEFT" valign="TOP" colspan="3">
		<p>The GMF build process utilizes the Eclipse update manager to
		install its dependencies. If you plan to run a clean build frequently,
		it is recommended that you configure a local mirror to provide the
		features for installation. Simply uncomment the 'useMirror' property
		set in the build.properties file(s) and install a local HTTP server to
		enable this functionality. It is recommended that Tomcat is used, as
		it can also serve to provide the CruiseControl reporting described
		below.</p>
		<p>GMF builds utilize the update manager via the command line for the
		installation of build dependencies (e.g. EMF &amp; GEF), and also to
		install GMF itself for unit tests runs. This has the added benefit of
		testing update site packaging and leverages the ability to update and
		maintain a local mirror site. The alternative is to download archives
		from the Eclipse website, which may turn out to be a better approach
		;-)</p>
		<p>To use a local mirror, you will need to install Tomcat and perform
		the following steps to setup the local update site:</p>
		<ul>
			<li><code>Adjust the 'localUpdateSite' and 'localUpdateSitePath'
			properties in the main build.properties to reflect your
			configuration.</code></li>
			<li><code>cd org.eclipse.gmf.releng.builder\scripts</code></li>
			<li><code>run 'build initLocalMirror'</code></li>
			<li><code>run 'build' command with -Dcomponent argument as described
			above</code></li>
		</ul>

		<p>Run the build and then navigate to http://localhost/updateSite (or
		similar, depending on your configuration). If you had run the build
		previously, you may want to rerun with -DcleanBase=true option in
		order to force the mirror and install of GMF dependencies locally.</p>
		<p>Without the mirror running, the build will resort to using the
		official update sites for dependencies, while using a simple unzip of
		GMF components (when running tests). When running, each build will
		produce update site jars which are then copied to the update site
		directory.</p>
		</TD>
	</TR>
</table>


<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td align="LEFT" valign="TOP" colspan="3" bgcolor="#999999"><b><font
			face="Arial,Helvetica" color="#FFFFFF"> <a name="cruise"></a>Using
		CruiseControl</font></b></td>
	</tr>

	<TR>
		<TD align="LEFT" valign="TOP" colspan="3">
		<p>The GMF project utilizes <a href="http://cruisecontrol.sf.net">CruiseControl</a>
		to manage its automated build process. The following basic steps are
		required to leverage CruiseControl:</p>
		<ul>
			<li>Install <a href="http://cruisecontrol.sf.net">CruiseControl</a>
			(version 2.3.1 is used currently)</li>
			<li>Check the settings of build.properties and config.xml files,
			modifying as necessary. In particular, the schedule interval, email
			server and addresses.</li>
			<li>If using Tomcat for the reporting component, follow the CC
			instructions to install the cruisecontrol.war and modify the web.xml
			file to point at the build's log and artifact locations. These will
			be specified in the CC config.xml file and are by default /build/logs
			and /build/ccpublish, respectively. The installation is as
			simple as copying the cc/reporting/jsp/dist/cruisecontrol.war file
			into the tomcat/webapps directory.</li>
			<li>You may want to adjust the maximum memory setting for Tomcat, and
			copy the xalan.jar provided with CruiseControl into the WEB-INF/lib
			directory of the exploded cruisecontrol webapp to avoid problems
			rendering larger reports.</li>
			<li>To run CruiseControl as a service on Windows, follow the instructions provided <a href="http://confluence.public.thoughtworks.org/display/CC/RunningCruiseControlAsaWindowsService">here</a>.</li>
		</ul>
		<p>To invoke CruiseControl, follow the instructions below:</p>
		<ul>
			<li><code>cd org.eclipse.gmf.releng.builder\scripts</code></li>
			<li><code>cruise</code></li>
		</ul>
		</TD>
	</TR>
	<tr>
		<td>
		<p><b>Note</b> that the checkout command is run initially and produces
		a full checkout structure of GMF in a 'checkout' subfolder of 'build'.
		This is necessary for CC to check for changes and kick off a build. It
		seems necessary for this duplication to exist, as the PDE build uses
		the 'export' CVS command and not 'checkout' as is required when
		checking for changes.</p>
		<p>Also, <b>note</b> that it should be possible for much of the
		scripts here and in the build itself to be generated from plug-ins and
		features. Perhaps future versions of the build will take advantage of
		these possibilities.</p>
		</td>
	</tr>
</table>

<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td align="LEFT" valign="TOP" colspan="3" bgcolor="#999999"><b><font
			face="Arial,Helvetica" color="#FFFFFF"> <a name="antbuildproperties"></a>Ant
		build.properties</font></b></td>
	</tr>
	<tr>
		<td><a name="antbuildproperties"></a>There are a number of Ant
		properties declared in the build.properties file, most of which are
		provided by the org.eclipse.releng.basebuilder utility and are
		described in <a
			href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.releng.eclipsebuilder/readme.html?rev=1.24">this</a>
		document. Below are a list of additional properties found in GMF's
		build process and their description. <br />
		<p>Each property can be overridden by setting them at the command line
		at build time or by changing them directly in the component's
		build.properties file, or a map definition's build.cfg file.</p>
		<table width="100%" border="1">
			<tr>
				<td align="LEFT" valign="TOP" colspan="2" bgcolor="#999DDD"><b><font
					face="Arial,Helvetica" color="#FFFFFF"> <a
					name="antbuildproperties"></a>Component build.properties</font></b></td>
			</tr>

			<tr>
				<td>buildRoot</td>
				<td>This directory is the root of the build folders for each
				component (e.g. sdk, tests, etc.) and the CruiseControl folders
				(when used). By default, it is a sibling to the releng folders. In
				GMF builds, it is recommended that you stick to setting buildRoot
				and avoid the buildDirectory property found within the scripts.</td>
			</tr>
			<tr>
				<td>cleanBase</td>
				<td>Normally commented out, but if present will cause the base to be
				deleted prior to the build. This will remove the base Eclipse
				installation and force an updated install of all dependencies.</td>
			</tr>
			<tr>
				<td>clean</td>
				<td>This will normally cause the cleaning of all output directories
				prior to the build, but in GMF will also cause a cleaning of all
				checkout areas to force an update from CVS.</td>
			</tr>
			<tr>
				<td>skipTests</td>
				<td>This is only found in the tests component and will prevent the
				execution of unit tests following the build and packaging steps.</td>
			</tr>

			<tr>
				<td align="LEFT" valign="TOP" colspan="2" bgcolor="#999DDD"><b><font
					face="Arial,Helvetica" color="#FFFFFF"> <a
					name="antbuildproperties"></a>Map build.cfg</font></b></td>
			</tr>
			<tr>
				<td>TODO:</td>
				<td>The properties found here are presently self-explanatory and
				largely to be unnecessary as most information can be gotten from
				feature.xml files (as is planned for future versions of the build
				process).</td>
			</tr>
		</table>
	</tr>
</table>

<table border="0" cellspacing="5" cellpadding="2" width="100%">
	<tr>
		<td align="LEFT" valign="TOP" colspan="3" bgcolor="#999999"><b><font
			face="Arial,Helvetica" color="#FFFFFF"> <a name="structure"></a>Project
		Structure</font></b></td>
	</tr>

	<TR>
		<TD align="LEFT" valign="TOP" colspan="3">
		<p>The CVS structure for GMF organizes the project by plug-ins,
		features, tests, etc., as seen below:</p>
		<table width="100%" border="0">
			<tr>
				<td colspan="6"><strong>/cvsroot/technology</strong></td>
				<td width="62%">CVS ROOT (dev.eclipse.org)</td>
			</tr>
			<tr>
				<td width="2%">&nbsp;</td>
				<td colspan="5" bordercolor="0"><strong>/org.eclipse.gmf</strong></td>
				<td>Graphical Modeling Framework subproject</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/contributions</strong></td>
				<td>GMF code contributions</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/doc</strong></td>
				<td>Project documentation</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/examples</strong></td>
				<td>GMF examples</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/features</strong></td>
				<td>GMF features</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/plugins</strong></td>
				<td>GMF plugins</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/releng</strong></td>
				<td>Build procedure scripts, update site, etc.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td width="3%" bordercolor="0">&nbsp;</td>
				<td colspan="4"><strong>/tests</strong></td>
				<td>GMF unit tests</td>
			</tr>
		</table>
		</TD>
	</TR>
</table>

<table width="100%" border="0">
	<tr>
		<td bgcolor="#999999"><b><font face="Arial,Helvetica" color="#FFFFFF">
		<a name="developers"></a>Developer information</font></b></td>
	</tr>
	<tr>
		<td>This section outlines some of the procedures and practices for GMF
		developers to maintain a smooth build/test environment. In particular,
		information on using the releng tool and how to add a plug-in to the
		build is covered.
		<ul>
			<li><b>Adding or removing a plug-in</b>: As the build depends on
			features remaining accurate, be sure to update the feature.xml for
			listed plug-ins and also check the 'Dependencies' list, using the
			Compute feature of the PDE if desired. You will also need to update
			the appropriate map file(s) to indicate the changes to plug-ins and
			their location in the repository. Alternatively, email the developer
			mailing list with changes requested and let the maintainer of the
			build effect the change.</li>
			<li><b>Adding a test plug-in</b>: Each test plug-in needs to have a
			corresponding test.xml file in order to be run as part of the build.
			See existing test.xml files for an example. Be sure to appropriately
			choose either 'ui-test' or 'core-test' for the target within this
			file. Information on what these mean is found in the <a
				href="ftp://download.eclipse.org/R-3.0.2-200503110845/testframework.html">readme</a>
			for the testing framework. Finally, each test plug-in is listed for
			execution in the test.xml file found in the scripts directory of the
			org.eclipse.gmf.releng.builder plug-in. You will need to add your new
			test plug-in to this list.</li>
		</ul>
		</td>
	</tr>

</table>

<table width="100%" border="0">
	<tr>
		<td bgcolor="#999999"><b><font face="Arial,Helvetica" color="#FFFFFF">
		<a name="gotchas"></a>Gotchas</font></b></td>
	</tr>
	<tr>
		<td>The build process is fairly complex, and will hopefully improve
		with more being generated/automated. A few things to watch out for are
		listed below: <br />
		<ul>
			<li>If the build stops during the fetch with an error message telling
			you to check your map files, open the generated fetch_*.xml file in
			your component build directory. If it is cutoff (malformed), check
			your CVS connection, as it is likely the cause.</li>
			<li>If you are running a build and get the message that 'plug-in
			org.*_X_X_X' cannot be found, check that you have declared/installed
			the necessary dependencies for the plug-in.</li>
			<li>If you are building a feature that contains a generate.* option in its build.properties file, and you are getting '.../build.xml file does not exist' messages, check that your plug-ins do not contain any cyclic dependencies. Specifically, look at any fragments you may have to see if they have their host plug-in listed as a dependency.</li>
		</ul>
		</td>
	</tr>

</table>

</body>
</html>
